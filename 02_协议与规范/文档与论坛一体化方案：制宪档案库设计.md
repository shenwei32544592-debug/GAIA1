# 文档与论坛一体化方案：制宪档案库设计

**用途**：实现联盟可公开讨论文档的「单入口浏览 + 论坛化讨论 + 版本留证」；作为 Founder 与 CTO 首次对齐的核心沟通工具，并为英雄贴公开招募奠基  
**版本**：草案 v0.2  
**依据**：《创世贡献记录与确认机制（论坛版）》§3.1、《有效路径与时间节点安排》  
**核心 DNA**：言论自由、信息被记录存证、公开透明

**战略背景**：GAIA_System_OS 为神经中枢；全盘数据在此。论坛为中枢与全部节点交互的主要方式。快速、高质量的中枢回应是建国期让生态看到希望的关键——无华盛顿式中心节点则建国不成。

---

## 一、目标与原则

| 需求 | 含义 |
|------|------|
| **单入口浏览** | 文档有统一入口可浏览（gaia-manual-website），与论坛可互通 |
| **文档即帖子** | 每份可公开讨论的文档，在论坛中对应一个主帖；正文 = 文档最新版 |
| **跟帖讨论** | CTO、Founder、后续加入者可在帖子下回复、提问、讨论 |
| **更新权归 Founder** | 文档内容仅 Founder 更新；讨论区所有人可发言 |
| **版本留证** | 每次文档更新时，变更摘要或 diff 追加到帖子中，形成可追溯的创世档案 |
| **言论自由 + 存证** | 发言不被事前审查；所有发言与修改可查、可追溯；为后续英雄贴公开招募树立范式 |

---

## 二、系统拓扑厘清

```
┌─────────────────────────────────────────────────────────────────────────┐
│  GAIA_System_OS（本地文档库，根路径 d:\GAIA_System_OS）                    │
│  · 源 Markdown 唯一信源                                                   │
│  · 无 Git（或未来推送至 GAIA 专用仓库）                                     │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                                    │ gaia-manual-website/build.js
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│  网站输出（gaia-manual-website/docs/ + index.html）                        │
│  · 每篇文档 → 独立 HTML 页                                                 │
│  · 每页含「在论坛讨论此文」链接（指向对应 Discussion）                        │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                                    │ 文档→Discussion URL 映射
                                    │ （见 doc-forum-mapping.json）
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│  论坛 · 制度广场（Phase 1：GitHub Discussions）                             │
│  · 载体：signa.ink 仓库 或 未来 GAIA 专用仓库                               │
│  · 每份文档 → 1 个 Discussion（主帖 = 文档正文；跟帖 = 讨论；回复 = 版本留证）  │
└─────────────────────────────────────────────────────────────────────────┘
```

**仓库选择**：

| 选项 | 仓库 | 适用场景 | 建议 |
|------|------|----------|------|
| A | signa.ink（shenwei19790815/signa.ink） | 已有仓库，CTO 已协作；signa = GAIA 001 实例 | **Phase 1 推荐**：制宪讨论作为「建'国'」的一部分，与 001 实例同源 |
| B | 未来 GAIA 专用仓库 | GAIA_System_OS 上 GitHub 后 | Phase 2/3 可迁移；若 GAIA 有独立品牌站点则优先 |

---

## 三、可讨论文档清单与映射

### 3.1 文档分类

| 类别 | 说明 | 是否建 Discussion |
|------|------|-------------------|
| **核心制宪** | 宪章、成立理由书、FCR、分润、创意载体规范、技术可行性 | 是，首批 |
| **协议与规范** | CTO 共识、创世贡献记录、英雄贴、建国判定等 | 是 |
| **解释与叙事** | FAQ、路演 PPT、蓝皮书等 | 是（按需） |
| **索引与内部** | Master Index、输入映射表、Founder-AI 协作约定 | 否（内部） |

### 3.2 文档→帖子映射配置

映射表独立存放，便于 Founder 维护、build 注入：

- **路径**：`gaia-manual-website/doc-forum-mapping.json`
- **格式**：`{ "文档相对路径": "GitHub Discussion URL" }`
- **示例**：
```json
{
  "01_宪法与治理/第一编｜基本权利.md": "https://github.com/shenwei19790815/signa.ink/discussions/1",
  "02_协议与规范/FCR 1.1 创始贡献者权利协议.md": "https://github.com/shenwei19790815/signa.ink/discussions/2",
  "06_解释与叙事/GAIA 技术可行性说明（公众版）.md": "https://github.com/shenwei19790815/signa.ink/discussions/3"
}
```
- **空缺时**：该文档页不显示「讨论此文」链接，不影响浏览

---

## 四、实施路径（Phase 1/2/3）

### Phase 1：MVP——GitHub Discussions + 手动同步（立即可用）

**适用**：Founder + CTO 首次对齐；论坛尚未搭建时  
**目标**：本周内可开始讨论；文档页有「讨论此文」入口

| 项目 | 方案 |
|------|------|
| **论坛载体** | 在 signa.ink 仓库启用 **Discussions**（Settings → Features → Discussions） |
| **Category** | 创建：`制宪讨论`、`协议与规范`、`技术实现` 等 |
| **文档即帖子** | 为核心文档各开一个 Discussion；主帖 = 文档正文（手动粘贴或复制） |
| **版本留证** | Founder 更新文档后，在同一 Discussion 下**回复一条 comment**，格式见 §五 |
| **跟帖讨论** | CTO、Founder 在 Discussion 下直接回复 |
| **入口** | build.js 读取 doc-forum-mapping.json；每篇有映射的文档页底部注入「在 GitHub 讨论此文」 |

**操作步骤**：
1. 在 signa.ink 仓库启用 Discussions，创建 Category
2. 为核心文档各建一个 Discussion，主帖贴入文档正文（可从 gaia-manual-website/docs/ 复制）
3. 新建 `doc-forum-mapping.json`，填入「文档路径 → Discussion URL」映射
4. 修改 build.js：复制 docs 时，若文档在映射表中，则在 `</article>` 前插入讨论链接块
5. 运行 `npm run build`，验证文档页底部出现讨论链接

**优点**：零成本、立即可用、Git 原生、可追溯  
**缺点**：主帖与文档需手动同步；版本留证靠 Founder 自觉回复

---

### Phase 2：半自动——同步脚本 + 论坛 API（CTO 参与后）

**适用**：论坛已搭建（Discourse / 自建 / 其他），有 API

| 项目 | 方案 |
|------|------|
| **同步触发** | Founder 执行「一键同步」或 `git push` 时，触发 post-commit / GitHub Action |
| **同步逻辑** | 脚本读取变更的 .md → 调用论坛 API：创建/更新主帖；追加「版本变更」区块 |
| **版本格式** | 主帖结构：`[正文]\n\n---\n\n## 版本历史\n### 2025-02-14\n[变更摘要]\n...` |

**技术要点**：论坛需提供 API；同步脚本（Node/Python）读取 git diff 或文件内容，调用 API。

---

### Phase 3：全自动——文档为单一数据源（远期）

**适用**：论坛成熟、有专职运维

| 项目 | 方案 |
|------|------|
| **数据流** | Markdown 唯一信源；CI/CD：构建网站 + 同步论坛，双重输出 |
| **版本留证** | 每次 commit 自动生成 changelog，写入论坛主帖的「版本历史」区块 |

---

## 五、版本留证格式

每次 Founder 更新文档后，在对应 Discussion 下回复一条 comment：

```markdown
---
### 更新记录 2025-02-14

**变更摘要**：第一编基本权利新增通俗解释附录；开篇补充联盟登记确权说明。

**涉及章节**：附录、开篇

---
```

**原则**：可查证、可追溯；为创世档案留下不可篡改的时间戳证据。

---

## 六、与《创世贡献记录与确认机制（论坛版）》的衔接

| 创世贡献记录 §3.1 约定 | 本方案对应实现 |
|------------------------|----------------|
| 建"国"路线图专区承载网站全部内容 | gaia-manual-website = 文档入口；Discussions = 专区讨论区 |
| 按条款/按文件讨论 | 每份文档 → 1 Discussion |
| 创世者重点回复、CTO 技术答疑 | 跟帖中分工；创世者制度/战略，CTO 技术/实现 |
|  transparent 透明化历史档案 | 版本留证 + 讨论可查 |
| 文档与论坛一体化、版本留证、同步机制 | 本文档即其技术与操作设计 |

---

## 七、操作清单与建议

### 7.1 Founder 立即可做（无需 CTO）

1. **启用 Discussions**：在 signa.ink 仓库 Settings → Features → Discussions，勾选启用
2. **创建 Category**：`制宪讨论`、`协议与规范`、`技术实现`
3. **建 Discussion**：为首批 5–10 份核心文档各建一个，主帖贴入正文
4. **建映射表**：`doc-forum-mapping.json`，填入文档路径 → Discussion URL
5. **改 build**：按 §四 Phase 1 步骤 4，注入「讨论此文」

### 7.2 需 CTO 参与

1. **论坛选型与搭建**：按《有效路径》「论坛优先」，CTO 负责论坛/制度广场；选型时优先考虑带 API、支持 Markdown、可程序化发帖的平台
2. **文档→帖子同步脚本**：论坛就绪后，实现 sync 逻辑；Founder 维持「一键同步」工作流

### 7.3 制度层面

1. **讨论区规则**：主帖或专区置顶明确——「正文更新权归 Founder；讨论区所有人可自由发言；发言即被记录、可追溯」
2. **中枢回应原则**：本专区由 Founder 作为制度与战略的核心答疑者；全盘数据在中枢，反馈力求快速、有据、可追溯。节点的问题会被看见，回复即创世档案的一部分
3. **与 Governance Log 的关系**：论坛讨论与版本记录可择要归档；重大共识、制度修正须有正式记录
4. **英雄贴衔接**：论坛稳定、讨论可查、版本可追溯时，广发英雄贴即具备「公开、透明、可验证」的档案基础

### 7.3a 中枢回应增强（补充方法）

| 方法 | 说明 |
|------|------|
| **FAQ 动态更新** | 论坛反复出现的问题沉淀进 FAQ；新节点自助，减轻中枢负担 |
| **分层响应** | 技术类 → CTO；制度/战略/共识类 → Founder；中枢聚焦高杠杆 |
| **AI 预答 + Founder 确认** | 常见问题由 AI 据文档起草，Founder 审阅后发出 |
| **透明 backlog** | 帖标注「已读/待回复/已回复」，节点知悉被看见 |
| **优先级队列** | 阻塞建国者优先；一般讨论批次处理 |

### 7.4 风险与边界

| 风险 | 应对 |
|------|------|
| 讨论区不当言论 | 事后处理；不事前审查；严重违规可依共识删除并记录 |
| 文档与帖子不同步 | 明确「文档为权威版本」；帖子滞后时以文档为准；定期人工校对 |
| 版本历史冗长 | 可设「仅保留近 N 次变更」；早期归档至 Governance Log |

---

## 八、下一步行动

| 时间 | 动作 |
|------|------|
| **本周** | 在 signa.ink 启用 Discussions；为核心文档建 Discussion；创建 doc-forum-mapping.json；修改 build 注入讨论链接；Founder 与 CTO 约定首次讨论动议 |
| **论坛搭建时** | 将「文档→帖子、版本留证、讨论区」纳入 CTO 需求规格 |
| **英雄贴前** | 确保至少 3–5 份核心文档已有可讨论、可追溯的帖子与版本记录 |

---

*本文档为操作设计草案；与《创世贡献记录与确认机制（论坛版）》《有效路径与时间节点安排》配套使用。*
